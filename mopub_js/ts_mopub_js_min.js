function addParameter(a,b){paramMap[a]=b}function getSerializedParams(){var a=[];for(var b in paramMap)paramMap.hasOwnProperty(b)&&a.push(encodeURIComponent(b)+"="+encodeURIComponent(paramMap[b]));return a.join("&")}function mp_fail(){window.location="mopub://failLoad"}function ts_callback(a){return ufid=a.ufid,ts_click_url=a.click_url,0==a.count_ad_units?(mp_fail(),void 0):(document.write('<div id="ts-div-'+ufid+'" style="width:'+window.ts_ad_width+";height:"+window.ts_ad_height+'">'),document.write(a.ad_units[0].html_vertical),document.write("</div>"),void 0)}function getServerUrl(){var a=generateRandomKey();return addParameter("ad_unit_id",window.ts_ad_unit_id),addParameter("pub",window.ts_pub),addParameter("app",window.ts_app),addParameter("ufid",a),addParameter("refer",window.location),addParameter("size",window.ts_width+"x"+window.ts_height),addParameter("keywords",window.ts_keywords),addParameter("version",TS_VERSION),addParameter("jsonp",1),addParameter("callback","ts_callback"),window.ts_test&&addParameter("test",window.ts_test),window.ts_device_id?addParameter("user",window.ts_device_id):addParameter("session_id",getSession()),window.ts_banner_ad&&addParameter("banner_ad",window.ts_banner_ad),window.ts_video_ad&&addParameter("video_ad",window.ts_video_ad),"function"==typeof mopubFinishLoad?addParameter("mr",0):addParameter("mr",1),TS_SERVER_HOST+"?"+getSerializedParams()}function generateRandomKey(){for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz012345678",b="",c=0;20>c;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b+=Math.floor(1e13*Math.random())}function setCookie(a,b,c,d,e,f){var g=a+"="+escape(b)+(c?";expires="+c.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(f?";secure":"");document.cookie=g}function getCookie(a){var b=document.cookie.indexOf(a+"="),c=b+a.length+1;if(!b&&a!=document.cookie.substring(0,a.length))return null;if(-1==b)return null;var d=document.cookie.indexOf(";",c);return-1==d&&(d=document.cookie.length),unescape(document.cookie.substring(c,d))}function getSession(){return getCookie(cookie_name)||setCookie(cookie_name,generateRandomKey()),getCookie(cookie_name)}var TS_SERVER_HOST="http://ads04.tapsense.com/ads/mopubad",TS_VERSION="1.0.2",ts_click_tracker,paramMap={},cookie_name="ts-sesssion-cookie";!function(){return null==window.ts_ad_unit_id||null==window.ts_pub||null==window.ts_app?(console.log("Failed to load ts ad. Missing 'ts_ad_unit_id' or 'ts_pub' or 'ts_app'"),void 0):(null==window.ts_width&&(window.ts_width=320),null==window.ts_height&&(window.ts_height=480),console.log('<script type="text/javascript" src="'+getServerUrl()+'"></s'+"cript>"),document.write('<script type="text/javascript" src="'+getServerUrl()+'"></s'+"cript>"),void 0)}();
